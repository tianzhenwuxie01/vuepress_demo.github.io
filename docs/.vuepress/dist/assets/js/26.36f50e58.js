(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{385:function(t,n,a){"use strict";a.r(n);var s=a(44),e=Object(s.a)({},(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("VPS 安装宝塔面板、oneindex、Aria2 & AriaNg，自动上传到 onedrive，并利用 onedrive 来做下载和播放站，可以分享播放链接，充当媒体分享站。\n重装：删除 oneindex 文件夹下文件重新安装")]),t._v(" "),a("h3",{attrs:{id:"提前准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提前准备"}},[t._v("#")]),t._v(" 提前准备：")]),t._v(" "),a("p",[t._v("VPS , 域名"),a("br"),t._v("\n先去你的域名 DNS 服务商，提前解析三个域名到你的 VPS 的 IP。"),a("br"),t._v("\n我用"),a("code",[t._v("vps.lwc.im")]),t._v("作为宝塔面板地址"),a("br"),t._v("\n用"),a("code",[t._v("pan.lwc.im")]),t._v("作为 oneindex 网站地址"),a("br"),t._v("\n用"),a("code",[t._v("xiazai.lwc.im")]),t._v("作为下载网站地址"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/1/1.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"vps-安装宝塔"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vps-安装宝塔"}},[t._v("#")]),t._v(" VPS 安装宝塔")]),t._v(" "),a("h4",{attrs:{id:"centos-系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos-系统"}},[t._v("#")]),t._v(" Centos 系统")]),t._v(" "),a("p",[a("code",[t._v("yum install -y wget && wget -O install.sh http://download.bt.cn/install/install.sh && sh install.sh")])]),t._v(" "),a("h4",{attrs:{id:"ubuntu-系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-系统"}},[t._v("#")]),t._v(" Ubuntu 系统")]),t._v(" "),a("p",[a("code",[t._v("wget -O install.sh http://download.bt.cn/install/install-ubuntu.sh && sudo bash install.sh")])]),t._v(" "),a("h4",{attrs:{id:"debian-系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#debian-系统"}},[t._v("#")]),t._v(" Debian 系统")]),t._v(" "),a("p",[a("code",[t._v("wget -O install.sh http://download.bt.cn/install/install-ubuntu.sh && bash install.sh")]),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/1/2.png",alt:""}}),a("br"),t._v("\n会问你是否确定要安装宝塔面板，这里我们输入 y，表示确定"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/1/3.png",alt:""}}),a("br"),t._v("\n继续安装，等待它安装完毕。"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/1/4.png",alt:""}}),a("br"),t._v("\n这个显示出来面板信息，这样我们的宝塔面板就装好了。"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/1/5.png",alt:""}}),a("br"),t._v("\n记住 Bt-Panel 里的地址, 还有 username 和 password")]),t._v(" "),a("h3",{attrs:{id:"vps-安装-nginx1-8、php7-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vps-安装-nginx1-8、php7-0"}},[t._v("#")]),t._v(" VPS 安装 Nginx1.8、PHP7.0")]),t._v(" "),a("p",[t._v("我们登陆那个网址，然后输入前面记下的 username 和 password"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/2/1.png",alt:""}}),a("br"),t._v("\n安装 Nginx, PHP，我的 VPS 是搬瓦工的，在 LNMP 这个部分里，Nginx 安装最新版本 1.8，PHP 选择 7.0，有这两个就可以了，其余的可以选择装或者不装，安装方式编译安装或极速都可以，然后点击一键安装。"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/2/2.png",alt:""}}),a("br"),t._v("\n然后它会进入安装界面，耐心等待它安装完毕，安装速度视你的 VPS 的配置情况而定。"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/2/3.png",alt:""}}),a("br"),t._v("\n当显示如下界面的时候，就是安装完了。"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/2/4.png",alt:""}}),a("br"),t._v("\n我们把这个消息盒子关掉，点击左边的面板设置，对我们的宝塔面板进行一些设置。"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/2/5.png",alt:""}}),a("br"),t._v("\n在这个界面里，我们可以修改登宝塔面板时用的域名, 就是 “提前准备” 里的"),a("code",[t._v("vps.lwc.im")]),t._v("。面板用户名和面板密码，因为系统生成的是随机的，我们可以把它改成我们自己想要的名字和密码。（域名、用户名和密码可以自己选择更改或者不更改，这个不影响使用）"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/2/6.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"安装-oneindex"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-oneindex"}},[t._v("#")]),t._v(" 安装 Oneindex")]),t._v(" "),a("p",[t._v("添加域名: 宝塔面板左侧 > 点击 “网站”> “添加站点”"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/1.png",alt:""}})]),t._v(" "),a("p",[t._v("输入信息后，点击提交"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/2.png",alt:""}})]),t._v(" "),a("p",[t._v("安装 Oneindex"),a("br"),t._v("\n用我们的 ssh 工具，先进入到我们刚刚添加的域名文件目录下，把"),a("code",[t._v("pan.lwc.im")]),t._v("改成自己的"),a("br"),t._v(" "),a("code",[t._v("cd /www/wwwroot/pan.lwc.im")]),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/3.png",alt:""}}),a("br"),t._v("\n然后根据不同的系统，安装 git，我是 debian")]),t._v(" "),a("h4",{attrs:{id:"debian-ubuntu-系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#debian-ubuntu-系统"}},[t._v("#")]),t._v(" Debian/Ubuntu 系统")]),t._v(" "),a("p",[a("code",[t._v("apt-get install git -y")])]),t._v(" "),a("h4",{attrs:{id:"centos-系统-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos-系统-2"}},[t._v("#")]),t._v(" CentOS 系统")]),t._v(" "),a("p",[a("code",[t._v("yum install git -y")]),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/4.png",alt:""}}),a("br"),t._v("\n然后安装 oneindex"),a("br"),t._v(" "),a("code",[t._v("git clone https://github.com/donwa/oneindex.git")]),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/5.png",alt:""}}),a("br"),t._v(" "),a("code",[t._v("mv oneindex/* ./")]),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/6.png",alt:""}}),a("br"),t._v(" "),a("code",[t._v("chmod 777 ./config && chmod 777 ./cache")]),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/7.png",alt:""}}),a("br"),t._v("\n宝塔 >“网站”> 点击我们的域名右侧的 “设置”>“伪静态”，粘贴上我们的代码，然后保存。")]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nif ("),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("!-f")]),t._v(" $request_filename)"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nset $rule_0 1$rule_0;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nif ("),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("!-d")]),t._v(" $request_filename)"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nset $rule_0 2$rule_0;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('\nif ($rule_0 = "21")'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nrewrite ^/(."),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("*)$")]),t._v(" /index.php"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?")]),t._v("/$1 last;\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/8.png",alt:""}}),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/9.png",alt:""}}),a("br"),t._v("\n我们在浏览器里，打开 Oneindex 的域名，进行安装和绑定 OneDrive 密匙"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/10.png",alt:""}}),a("br"),t._v("\n点击下一步后，在下一个页面，点击 “获取应用 ID 和机密”"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/11.png",alt:""}}),a("br"),t._v("\n这个时候它会打开微软的登陆页面，登陆我们想要绑定的 onedrive 账号"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/12.png",alt:""}}),a("br"),t._v("\n登陆完成以后，会出现另外一个页面，显示应用机密，我们将文本框的字母全部复制下来，"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/13.png",alt:""}}),a("br"),t._v("\n返回到我们 Oneindex 的网页，将复制的代码填入第一个框"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/14.png",alt:""}}),a("br"),t._v("\n回到应用机密那个网页，点击 “知道了，返回到快速启动”"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/15.png",alt:""}}),a("br"),t._v("\n将 App ID 填入 oneindex 网页中的应用 ID 栏里"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/16.png",alt:""}}),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/17.png",alt:""}}),a("br"),t._v("\n点击下一步，之后的页面里点击 “绑定账号”"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/18.png",alt:""}}),a("br"),t._v("\n选择我们要绑定的账号"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/19.png",alt:""}}),a("br"),t._v("\n点击接受"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/20.png",alt:""}}),a("br"),t._v("\n就提示你安装成功了"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/21.png",alt:""}}),a("br"),t._v("\n我们点击 “管理后台”，输入初始密码 “oneindex”，就可以进入我们的后台了"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/22.png",alt:""}}),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/3/23.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"安装-aria2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-aria2"}},[t._v("#")]),t._v(" 安装 Aria2")]),t._v(" "),a("p",[t._v("返回 ssh 工具，回到主目录"),a("br"),t._v(" "),a("code",[t._v("cd /")]),a("br"),t._v("\n用下列代码下载并安装 aria2，")]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("wget "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("N "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("no"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("check"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("certificate https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//raw.githubusercontent.com/ToyoDAdoubi/doubi/master/aria2.sh "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&amp;&amp;")]),t._v(" chmod +x aria2.sh "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&amp;&amp;")]),t._v(" bash aria2.sh\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("备用地址")]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("wget "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("N "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("no"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("check"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("certificate https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//www.moerats.com/usr/shell/Aria2/aria2.sh "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&amp;&amp;")]),t._v(" chmod +x aria2.sh "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&amp;&amp;")]),t._v(" bash aria2.sh\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/4/1.png",alt:""}})]),t._v(" "),a("p",[t._v("输入 1，等待安装，后面还有一个关于版本选择的，直接回车就好")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/4/2.png",alt:""}})]),t._v(" "),a("p",[t._v("出现这个就表示安装完成了，记住这些信息，我们下一步要用到")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/4/3.png",alt:""}})]),t._v(" "),a("p",[t._v("修改密码"),a("br"),t._v("\n可以通过这个命令来修改，不修改也可以")]),t._v(" "),a("p",[a("code",[t._v("bash aria2.sh")])]),t._v(" "),a("h3",{attrs:{id:"安装-ariang"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-ariang"}},[t._v("#")]),t._v(" 安装 AriaNg")]),t._v(" "),a("p",[t._v("宝塔添加域名"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/5/1.png",alt:""}})]),t._v(" "),a("p",[t._v("上传程序"),a("br"),t._v("\nDebian/Ubuntu 系统"),a("br"),t._v(" "),a("code",[t._v("apt-get install unzip -y")]),a("br"),t._v("\nCentOS 系统"),a("br"),t._v(" "),a("code",[t._v("yum install unzip -y")]),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/5/2.png",alt:""}}),a("br"),t._v(" "),a("code",[t._v("cd /www/wwwroot/xiazai.lwc.im")]),a("br"),t._v(" "),a("code",[t._v("wget https://www.moerats.com/usr/down/aria-ng-0.2.0.zip && unzip aria-ng-0.2.0.zip")]),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/5/3.png",alt:""}}),a("br"),t._v("\n打开你为 AriaNg 添加的域名"),a("br"),t._v("\n显示未连接"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/5/4.png",alt:""}}),a("br"),t._v("\n点击左边 AriaNg 设置，然后点击 RPC，在下面 RPC 密匙中输入我们在安装 Aria2 时记下来的信息，然后右上角会蹦出来个 “重新加载页面”，点击它"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/5/5.png",alt:""}}),a("br"),t._v("\n就可以看到我们的 aria2 状态已经连接上了"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/5/6.png",alt:""}}),a("br"),t._v("\n点击左边的”Aria2 设置”，再点击”BitTorrent 设置”"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/5/7.png",alt:""}}),a("br"),t._v("\n再拉到最后，把最小做种时间改成 0，然后刷新一下网页。"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/5/8.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"配置上传"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置上传"}},[t._v("#")]),t._v(" 配置上传")]),t._v(" "),a("p",[t._v("回到我们的宝塔面板，点击左侧 “文件”，进入“root/.aria2” 文件夹下，然后新建一个空白文件，文件名叫”oneindexup.sh”"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/6/1.png",alt:""}}),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/6/2.png",alt:""}}),a("br"),t._v("\n然后将下面的代码复制进去，记住修改成自己的 oneindex 的域名，不然不会自动上传到 onedrive，之后右下角保存"),a("br"),t._v(" "),a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/6/3.png",alt:""}})]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#!/bin/bash")]),t._v("\npath=$3\ndownloadpath='/usr/local/caddy/www/aria2/Download'\ndomain='pan.lwc.im'  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改成自己域名")]),t._v("\n\nif "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" $2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("eq 0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t\tthen\n\t\t\t\texit 0\nfi\nwhile true; do\nfilepath=$path\npath=$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path%/*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(";\nif "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(' "$path" = "$downloadpath" '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&amp;&amp;")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" $2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("eq 1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\tthen\n\tphp /www/wwwroot/$domain/one.php upload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("file $filepath /$folder/\n\trm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rf $filepath\n\tphp /www/wwwroot/$domain/one.php cache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("refresh\n\texit 0\nelif "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(' "$path" = "$downloadpath" '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\tthen\n\tphp /www/wwwroot/$domain/one.php upload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("folder $filepath /$folder/\n\trm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('rf "$filepath/"\n\tphp /www/wwwroot/$domain/one.php cache'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("refresh\n\texit 0\nfi\ndone\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br")])]),a("p",[t._v("然后在 ssh 工具里，分别输入下面的代码")]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v('chmod +x /root/.aria2/oneindexup.sh\n\necho "on'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("download"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('complete=/root/.aria2/oneindexup.sh" '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("/root/.aria2/aria2.conf\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://pic-1252861294.cos.ap-beijing.myqcloud.com/oneindex/6/4.png",alt:""}}),a("br"),t._v("\n再重启 Aria2")]),t._v(" "),a("p",[a("code",[t._v("service aria2 restart")])])])}),[],!1,null,null,null);n.default=e.exports}}]);